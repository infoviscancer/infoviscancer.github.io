<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="icon" href="images/favicon.png" />
<title>Stomach cancer gene visualization</title>

<link type="text/css" rel="stylesheet" href="stylesheets/graph_style.css" />
<link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
<link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
<link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
<link rel="stylesheet" href="//code.jquery.com/ui/1.11.0/themes/smoothness/jquery-ui.css">
<script src="//code.jquery.com/jquery-1.10.2.js"></script>
<script src="//code.jquery.com/ui/1.11.0/jquery-ui.js"></script>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="js/underscore.js"></script>
<script src="js/mapper.js"></script>
<script src="graph/graph_chord.js"></script>
</head>

<body>
<div id="tooltip"></div>

<div id="container_diagram">
  <p id="loading" style="color:#444444; font-size:18px; margin-top:300px;">Loading...</p>
  <div id="diagram" style="height:600px;"> 
    <script> draw('csv/chord/matrice_10_class.csv'); </script> 
  </div>
<div class="slider_wrapper">
<div id="slider" class="slider_normal"></div>
<div id="slider_text"></div>
<div id="slider_class" class="slider_normal" style="width:30px;"></div>
<div id="slider_class_text"></div>
</div>
</div>

<script>
  
var show_classe = 1;
var num_genes = 10;
  
  
$(function() {
  $("#slider").slider({
	value: 10,
	min: 10,
	max: 50,
	step: 10,
	animate: true,
	slide: function(event, ui) {
		console.log(ui.value);
		setSliderText(ui.value);
		num_genes = ui.value;
		setAndDraw(show_classe, num_genes);
		
	}
	});
	
	$("#slider_class").slider({
	value: 1,
	min: 0,
	max: 1,
	step: 1,
	animate: true,
	slide: function(event, ui) {
		console.log(ui.value);			
		setAndDraw(ui.value, num_genes);
	}
	});
	
});

  
function setAndDraw(sclasse, num_genes) {
	var classe;
	show_classe = sclasse;
	if(sclasse == 1)
			classe = 'class';
		else
			classe = 'noclass';
	clear();
	draw('csv/chord/matrice_'+num_genes+'_'+classe+'.csv');
	setSliderClassText(classe);
	}

function setSliderText(text) {
	document.getElementById('slider_text').innerHTML = text + ' genes';
	}
	
function setSliderClassText(text) {
	var didascalia;
	if(text == 'class')
		didascalia = 'class connection';
	else
		didascalia = 'no class connection';
	document.getElementById('slider_class_text').innerHTML = didascalia;
	}
	
	function centra(div){
	var DIVwidth = $(div).width();	
	//var DIVheight = $(div).height();
	var SCREENwidth = $(document).width();
	//var SCREENheight = $(window).height();	
	//var SCREENscrolltop = $(window).scrollTop();
	var SCREENscrollleft = $(window).scrollLeft();
	$(div).animate({   
		//top: (SCREENheight-DIVheight)/2+SCREENscrolltop+"px",
		left: (SCREENwidth-DIVwidth)/2+SCREENscrollleft+"px"
	},100,function(){
        centra(div);
    });	 
}
	
  setSliderText(10);
  setSliderClassText('class');
  centra('#container_diagram');
  </script>
</body>
</html>
